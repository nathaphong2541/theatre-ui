<header
  class="sticky top-0 z-50 border-b border-white/10 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-700 text-white shadow">
  <div class="supports-[backdrop-filter]:bg-white/5 supports-[backdrop-filter]:backdrop-blur-md">
    <div class="mx-auto max-w-7xl px-3 sm:px-5">

      <!-- แถบบน -->
      <div class="flex h-14 items-center gap-2 sm:h-16">

        <!-- Left: Mobile menu button -->
        <div class="md:hidden">
          <button (click)="toggleMobileMenu()" type="button" class="inline-flex items-center justify-center rounded-md p-2 text-white/90 hover:bg-white/10
         focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40" aria-label="เปิดเมนู"
            [attr.aria-expanded]="mobileMenuAriaExpanded">
            <svg-icon *ngIf="!isMobileMenuOpen" src="assets/icons/heroicons/outline/menu.svg" [svgClass]="'h-6 w-6'">
            </svg-icon>
            <svg-icon *ngIf="isMobileMenuOpen" src="assets/icons/heroicons/outline/menu.svg" [svgClass]="'h-6 w-6'">
            </svg-icon>
          </button>
        </div>

        <!-- Center: Logo + Title -->
        <div class="flex min-w-0 items-center gap-2 md:mx-4 sm:gap-3">
          <a routerLink="/" class="rounded-sm p-1 outline-none focus-visible:ring-2 focus-visible:ring-white/40">
            <img src="assets/images/logo.png" width="28" height="28" class="h-7 w-7 sm:h-9 sm:w-9" alt="โลโก้" />
          </a>
          <h1 i18n="@@homeTitle"
            class="truncate font-bold uppercase tracking-wide text-sm text-white sm:text-base md:text-lg">
            พอร์ทัลผู้ทำบัญชี
          </h1>
        </div>

        <!-- Spacer -->
        <div class="flex-1"></div>

        <!-- Desktop nav -->
        <nav class="hidden md:block">
          <ul class="flex items-center gap-1 lg:gap-2">
            <ng-container *ngTemplateOutlet="navLinks"></ng-container>
          </ul>
        </nav>

        <!-- Right controls -->
        <div class="flex items-center gap-2 sm:gap-3">
          <div
            class="hidden xs:flex items-center rounded-2xl bg-white/90 px-2 py-1 text-gray-900 shadow-md ring-1 ring-black/5">
            <app-language-menu></app-language-menu>
          </div>

          <ng-container *ngIf="(isLoggedIn$ | async); else guest">
            <app-profile-menu></app-profile-menu>
          </ng-container>

          <ng-template #guest>
            <button (click)="login()" class="inline-flex items-center rounded-md border border-white/20 bg-white/10 px-3 py-1.5 text-sm font-medium
                     hover:bg-white/15 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40">
              <span i18n="@@login">เข้าสู่ระบบ</span>
            </button>
          </ng-template>

          <div class="xs:hidden">
            <div class="px-1.5 py-1">
              <app-language-menu></app-language-menu>
            </div>
          </div>
        </div>
      </div>

      <!-- Template เมนู -->
      <ng-template #navLinks>
        <li class="snap-start">
          <a routerLink="/en" [routerLinkActiveOptions]="{ exact: true }" routerLinkActive="is-active" class="nav-link"
            (click)="closeMobileMenu()">หน้าหลัก</a>
        </li>
        <li class="snap-start">
          <a routerLink="/en" fragment="about" routerLinkActive="is-active" class="nav-link"
            (click)="closeMobileMenu()">เกี่ยวกับเรา</a>
        </li>
        <li class="snap-start">
          <a routerLink="/en" fragment="news" routerLinkActive="is-active" class="nav-link"
            (click)="closeMobileMenu()">ข่าวสาร</a>
        <li class="snap-start">
          <a routerLink="/en" fragment="profiles" routerLinkActive="is-active" class="nav-link"
            (click)="closeMobileMenu()">ค้นหาสมาชิก</a>
        </li>
        <li class="snap-start">
          <a routerLink="/en" fragment="donate" routerLinkActive="is-active" class="nav-link"
            (click)="closeMobileMenu()">สนับสนุนเรา</a>
        </li>
      </ng-template>


      <!-- Mobile nav -->
      <nav *ngIf="isMobileMenuOpen" aria-label="เมนูหลัก (มือถือ)" class="md:hidden animate-fadeIn">
        <ul class="my-3 no-scrollbar flex flex-col gap-1 rounded-xl border border-white/10 bg-white/5 p-2 backdrop-blur
                 supports-[backdrop-filter]:bg-white/10">
          <ng-container *ngTemplateOutlet="navLinks"></ng-container>
        </ul>
      </nav>

    </div>
  </div>
</header>